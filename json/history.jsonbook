{"cells":[{"languageId":"markdown","content":"# История\n\n![json-logo](https://i.pinimg.com/originals/af/e9/21/afe9219d7dc0bb2b255d82ddbf9a872e.png)\n\nJavaScript Object Notation (далее `JSON`) - это один из (если не сказать самый) распростроненный способ описания данных для обмена данными между приложениями на сегодняшний день.\n\nЕго автор, [Дуглас Крокфорд](https://ru.wikipedia.org/wiki/%D0%9A%D1%80%D0%BE%D0%BA%D1%84%D0%BE%D1%80%D0%B4,_%D0%94%D1%83%D0%B3%D0%BB%D0%B0%D1%81), придумал этот формат в начале 2000-х годов как альтернативу громоздкому и сверх пополурному на тот момент языку `XML`.\n\n### Дуглас Крокфорд (2013, фото с сайта wikipedia.org)\n\n![douglas](https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Douglas_Crockford%2C_February_2013.jpg/1200px-Douglas_Crockford%2C_February_2013.jpg)","kind":1},{"languageId":"markdown","content":"В начале нулевых интернет не был столь распространенным явлением, каким он является сейчас. Браузеры были гораздо более простыми и узкоспециализированными программами, не было большинства современных фреймворков (на подобие React, Angular, Vue и т.п.), мультимедиа контент на сайтах (анимированные картинки, звуки, фрагменты видео) только начинал набирать обороты, цвет травы на заставке рабочего стола был зеленее...\nОднако уже тогда остро стоял вопрос, как заставить страницу сайта выглядеть интерактивной, и, самое главное, как при этом обеспечить максимально простой и универсальный способ обмена данными между сервером и браузером.","kind":1},{"languageId":"markdown","content":"Одним теплым колифорнийским вечером в апреле 2001 года, двое инженеров [Дуглас Крокфорд](https://ru.wikipedia.org/wiki/%D0%9A%D1%80%D0%BE%D0%BA%D1%84%D0%BE%D1%80%D0%B4,_%D0%94%D1%83%D0%B3%D0%BB%D0%B0%D1%81) и [Чип Морнингстар](https://en.wikipedia.org/wiki/Chip_Morningstar), собрались в гараже второго, чтобы... Нет, не затем, зачем обычно собираются мужчины за 30 в гараже вечером, а чтобы своими руками сотворить новую веху в истории IT и лично принять участие в важном историческом событии - отправить первое в мире сообщение в формате JSON. Что именно было в этом сообщении доподлинно неизвестно.\n\nЭтот формат стал таким не сразу, и претерпел несолько изменений по ходу создания и воплощения в жизнь. Изначально Дуглас и Чип хотели воплотить идею **пост** загрузки данных на web страницу, при которой данные с сервера приходят и отображаются на странице уже после ее загрузки. Сейчас трудно себе представить, что когда-то эта идея была иннавационной и казалась свершением, т.к. практически все современные сайты используют именно такой подход.","kind":1},{"languageId":"markdown","content":"Первое, что они попробовали - это просто присылать с сервера \"куски\" HTML разметки, чтобы потом динамически встраивать их в уже загруженное дерево документа.\nНапример, если у пользователя уже отобразилась начальная пустая страница\n\n```html\n\u003c!DOCTYPE html\u003e\n\u003chtml\u003e\n\t\u003chead\u003e\n\t\t...\n\t\u003c/head\u003e\n\n\t\u003cbody onload=\"getDataFromServer()\"\u003e\n\t\u003c/body\u003e\n\u003c/html\u003e\n```\n\nто после ее загрузки, браузер сделает еще один запрос на сервер, в результате которого он должен получить только те данные, которых еще нет на странице.\n\nОтвет от сервера\n\n```html\n\u003cdiv\u003e\n\t\u003cspan\u003eLorem ipsum\u003c/span\u003e\n\t\u003cspan\u003edolor sit amet\u003c/span\u003e\n\u003c/div\u003e\n```\n\nпри помощи заранее написанного JS скрипта, просто добавится в текст изначальной страницы:\n\n```html\n\u003c!DOCTYPE html\u003e\n\u003chtml\u003e\n\t\u003chead\u003e\n\t\t...\n\t\u003c/head\u003e\n\n\t\u003cbody onload=\"getDataFromServer()\"\u003e\n\t\n\t\t\u003cdiv\u003e\n\t\t\t\u003cspan\u003eLorem ipsum\u003c/span\u003e\n\t\t\t\u003cspan\u003edolor sit amet\u003c/span\u003e\n\t\t\u003c/div\u003e\n\t\t\n\t\u003c/body\u003e\n\u003c/html\u003e\n```\n\nпосле чего браузер любезно \"перерисует\" изменённую часть.\nТакой подход позволил значительно сократить начальную загрузку страницы и позволил подгружать на сайт новую информацию только тогда, когда это действительно необходимо.\nК слову, подобный подход до сих пор применяется в современных web фреймворках (Angular, Vue, React, Svelte и т.п.).","kind":1},{"languageId":"markdown","content":"Результат был достигнут, однако двух любознательных инженеров не устаивало то, что при отправке только HTML разметки, трудно добавлять интерактивность, и, зачастую, теги языка занимают больше памяти, нежели полезные данные внутри них. С этой целью они несколько изменили формат отправляемых сервером данных, позволив включать в ответ еще и фрагменты Javascript кода, который будет запускаться автоматически.\n\n```html\n\u003c!-- ОТВЕТ ОТ СЕРВЕРА --\u003e\n\n\u003cdiv id=\"pl\"\u003e\u003c/div\u003e\n\n\u003cscript\u003e\n\tvar programmingLanguages = [\"JAVA\", \"SQL\", \"C++\"];\n\t\n\tvar pl = document.getElementById(\"pl\");\n\tfor (var i = 0; i \u003c programmingLanguages.length; i++) {\n\t    var p = document.createElement(\"p\");\n\t    p.innerText = programmingLanguages[i];\n\t    pl.appendChild(p);\n\t}\n\u003c/script\u003e\n\n```\n\nЭто позволило им реализовать на разрабатываемом сайте все изначальные задумки, однако не решило, как оказалось, главной проблемы - совместимости с браузерами.\nВ начале текущего тысячелетия балом правили 2 программы для выхода в сеть - [Internet Explorer 5](https://ru.wikipedia.org/wiki/Internet_Explorer_5) и [Netscape 4](https://ru.wikipedia.org/wiki/Netscape_Navigator). В то время обновление браузеров до актуально версии не насило столь массового характера как сегодня, поэтому исправления критических ошибок, произведенных разработчиками, доходили до конечного пользователя спустя многие месяцы, а то и годы.\nА ошибок было предостаточно. В основном они были связанны с некорректным отображением элементов HTML и интерпретацией языка Javascript.\nТо, что прекрасно работало в Netscape, выдавало критическую ошибку в Internet Explorer, и наоборот. Поэтому идея передачи готового скрипта на Javascript просто не имела смысла, из-за того, что нужно было каждый раз проверять на стороне клиентского браузера его версию, список поддерживаемых инструкций и принимать решение как именно запускать тот или иной скрипт.","kind":1},{"languageId":"markdown","content":"Тогда Дуглас решил радикально изменить формат передаваемого сервером сообщения: полностью избавиться от HTML и Javascript. Вместо этого он решил передавать только \"полезную нагрузку\" - те данные, которые нужно отобразить, а на стороне браузера предусмотреть единообразный скрипт, который будет принимать эти данные и, в зависимости от поодерживаемых браузером комманд, отображать их. А формат этих данных пришел сам - это просто готовые объекты языка Javascript, однако без каких-либо методов (функций), привязанных к ним.\n\nТак появился формат JSON (**Javascript** Object Notation).","kind":1},{"languageId":"json","content":"{\n\t\"firstName\": \"Douglas\",\n\t\"lastName\": \"Crockford\"\n}","kind":2},{"languageId":"markdown","content":"## Что еще я должен знать про JSON?!\n\nКак и 30 лет назад, перед современными программистами стоит задача в обмене данными между приложениями. Этот обмен может происходить как между несколькими процессами запущенными на одном компьютере в одной операционной системе, так и между двумя и более программами на различных типах устройств и под управлением различных ОС.\n\nНапример, мобильное приложение (далее **клиент**), запущенное на ОС Android, должно послать запрос на сервер, чтобы получить или записать данные на удаленный сервер. В свою очередь сервер (скорее всего находящийся за много тысяч киллометров от устройства, и управляемый ОС семейства unix), должен уметь принять данные запроса, обработать их, и отдать клиентскому приложению требуемую информацию. Для этого сервер и клиент должны заранее \"договориться\" о формате поступаемых и возвращаемых данных (заключить **контракт** общения).\n\nКонтракт может быть задан и реализован разработчиками только для данного конкретного приложения. В этом случае, с сервером смогут общаться только те устройста, которые запрограммированны определенным образом, и умеют обрабатывать только определенные данные в строго заданном формате. В целях безопасности, многие приложения, например банковские, действительно используют собственные форматы (контракты) обмена данными между клиентом и сервером. Но чаще всего, задача обмена не сопровождается дополнительными сложностями и сводится просто к передаче текстовой информации между устройствами.","kind":1},{"languageId":"markdown","content":"Каждый ~~уважающий себя~~ программист, перед которым стояла подобная задача, пытался решить ее по-разному.\nДавайте представим, что серверу необходимо вернуть информацию о найденном пользователе для отображения на сайте. В базе данных хранится следующая информация:\n\n| name  | email             | city  |\n|-----  |-----------------  |------ |\n| Vasya | vasya2020@mail.ru | Minsk |\n\nКак вернуть ее клиенту? Ответом должна быть строка, в которой будет хранитюся вся информация о пользователе.\n\nДавайте представим самый простой вариант, который приходит в голову: объединим все значения в строку через символ ';'.\nКлиенту придет такой ответ:\n\n```\n\"Vasya;vasya2020@mail.ru;Minsk\"\n```\n\nОн, в своую очередь, будет запрограммирован на то, чтобы разделять данную строку по символу ';', и затем из полученного массива строк извлекать имя пользователя из первой ячейки, email из второй и название города из третьей.\nВсе отлично, но только до тех пор, пока к нам не придет осознание, что, например, в поле city пользователь может указать значение `Minsk;Belarus`.\nТогда, при формировании ответа, строка превратится в\n\n```\n\"Vasya;vasya2020@mail.ru;Minsk;Belarus\"\n```\n\nи клиентское приложение уже не сможет отобразить эту информацию правильно.\nКонечно, можно придумать в качестве разделителя такой символ (набор символов), который не встречается в записях базы данных, и тем самым гарантировать, что ответ не будет иметь неоднозначных трактовок. Но даже в этом случае, разбор информации на стороне клиента будет сопровождаться определенными сложностями в плане написания кода, и, конечно, отнимать драгоценное время клиента на разбор (парсинг) данных, прежде чем отобразить страницу с полученной информацией на сайте или в мобильном приложении.","kind":1},{"languageId":"markdown","content":"Решение было простым - необходимо было придумать единый стандарт, при помощи которого и клиент и сервер смогут заранее знать о формате данных, и программистам не нужно каждый раз писать новые парсеры, а использовать уже готовые из предоставленных библиотек.\nСказано - сделано! Сегодня можно выделить 2 основых - **JSON** и **XML**.","kind":1},{"languageId":"markdown","content":"## JSON vs XML\n\nДо определенного момента, единственным удобным способом кодировки данных для дальнейшего обмена был [XML](https://ru.wikipedia.org/wiki/XML).\nВот пример того, как будет выглядеть ответ от сервера, содержащий данные о том же пользователе на языке разметки XML:\n\n```xml\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\n\u003cuser\u003e\n\t\u003cname\u003eVasya\u003c/name\u003e\n\t\u003cemail\u003evasya2020@mail.ru\u003c/email\u003e\n\t\u003ccity\u003eMinsk\u003c/city\u003e\n\u003c/user\u003e\n```\n\nСогласитесь, такой формат уже более читаемый для человека нежели просто объединение всего в строку через разделитель. Да и без труда можно найти библиотеки под любой язык программирования, которые умеют обрабатывать данные в такой кодировке.\nЕсли всё так замечательно, и XML закрыл огромное количество дыр для описания контрактов между приложениями, то встает резонный вопрос: почему он а не JSON? Зачем программистам понадобился еще один формат?\n\nВсе очень просто. Обратите внимание на то, что более половины текста (символов) в кодировке XML - это служебная информация (теги `\u003cuser\u003e`, `\u003c/user\u003e`, `\u003cname\u003e`, `\u003c/name\u003e` и т.д.). А когда речь заходит о больших объемах передаваемых данных, да еще и по сети, то XML из отличной технологии превращается в медленное, громоздкое и плохо читаемое нечто.\nНа данном графике вы можете увидеть, как менялась популярность поисковых запросов для языка XML на протяжении нескольких последних лет на сайте [stackoverflow](https://ru.stackoverflow.com/).\n\n![xml-popularity-chart](https://miro.medium.com/max/1838/1*-cdMO5EirihVGkHkGYLJIA.png)","kind":1},{"languageId":"markdown","content":"## Где доказательства?\n\nОгромная часть современного web-а и мобильных приложений используют этот формат для обмена данными с сервером.\nПерейдя по ссылкам внизу, вы увидите, как тесно JSON вплетен в современные приложения:\n\n- [API Национального банка РБ](https://www.nbrb.by/api/exrates/currencies)\n- [Случайные факты о собаках](https://dog-facts-api.herokuapp.com/api/v1/resources/dogs?number=10)\n- [Blockchain](https://min-api.cryptocompare.com/data/pricemultifull?fsyms=ETH\u0026tsyms=USD)\n- [Тендеры](https://tenders.guru/api/pl/tenders)\n- [Погода](https://www.metaweather.com/api/location/44418/2013/4/27/)\n- и многое многое другое...\n\nЛюбой современный мессенждер, любой сайт или приложение, установленное в вашем смартфоне, с огромной долей вероятности использует JSON как основу для общения с сервером.","kind":1},{"languageId":"markdown","content":"## Лицензия\n\n[MIT](https://github.com/MonkeyBuisness/alphabet/blob/master/LICENSE)","kind":1},{"languageId":"markdown","content":"## Ссылки\n\n- [Интервью с Дугласом Крокфордом о JSON и других технологиях на русском языке](https://www.youtube.com/watch?v=WSqCpWYfTFU\u0026list=PLliXIZ4xbu1LXzPbukR2_KU6chGvFAChe\u0026index=3)\n- [Оффициальный сайт проекта JSON](https://www.json.org/)\n- [Детальная история появления формата](https://twobithistory.org/2017/09/21/the-rise-and-rise-of-json.html)\n- [Список полезных библиотек и утилит для работы с JSON](https://github.com/burningtree/awesome-json)\n- [Статья о росте популярности JSON](https://www.prokurainnovations.com/json/)","kind":1},{"languageId":"markdown","content":"# Authors\n\n\u003cstyle\u003e\n    img[alt=avatar] {\n        width: 96px;\n        height: 96px;\n        object-fit: cover;\n        border-radius: 50%;\n    }\n\u003c/style\u003e\n\n\n\n|  | Name | About |\n|- |----- |------ |\n| ![avatar](https://github.com/MonkeyBuisness/alphabet/raw/master/.github/assets/me.jpg) | Artsem Hutarau\u003cbr /\u003e[More info](https://github.com/MonkeyBuisness) | Go developer, IT teacher |\n\n","kind":1}]}